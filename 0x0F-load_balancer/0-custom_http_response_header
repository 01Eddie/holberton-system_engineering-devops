#!/usr/bin/env bash
# Configure Nginx so that its HTTP response contains a custom header
# Install nginx

sudo apt-get -y update
sudo apt-get -y install nginx
ufw allow 'Nginx HTTP'
echo "Holberton School" > /var/www/html/index.nginx-debian.html
sudo sed -i "/servername ;/ a\\trewrite ^/redirect_me http://www.holbertonschool.com/ permanent;" /etc/nginx/sites-available/default
sudo sed -i "/servername ;/ a\\tadd_header X-Served-By "$HOSTNAME";" /etc/nginx/sites-available/default
sudo sed -i "/redirect_me/ a\\terror_page 404 /error_404.html;" /etc/nginx/sites-available/default
echo "Ceci n'est pas une page" > /var/www/html/error_404.html
sudo service nginx start
sudo service nginx restart
sudo service nginx reload
